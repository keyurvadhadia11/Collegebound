'use strict';var stripe=Stripe(college_bound_ajax_object.admin_stripe_skey);function registerElements(elements,exampleName){var formClass='.'+exampleName;var example=document.querySelector(formClass);var form=example.querySelector('form');var resetButton=example.querySelector('a.reset');var error=form.querySelector('.error');var errorMessage=error.querySelector('.message');function enableInputs(){Array.prototype.forEach.call(form.querySelectorAll("input[type='text']"),function(input){input.removeAttribute('disabled')})}
function disableInputs(){Array.prototype.forEach.call(form.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(input){input.setAttribute('disabled','true')})}
function triggerBrowserValidation(){var submit=document.createElement('input');submit.type='submit';submit.style.display='none';form.appendChild(submit);submit.click();submit.remove()}
var savedErrors={};elements.forEach(function(element,idx){element.on('change',function(event){if(event.error){error.classList.add('visible');savedErrors[idx]=event.error.message;errorMessage.innerText=event.error.message}else{savedErrors[idx]=null;var nextError=Object.keys(savedErrors).sort().reduce(function(maybeFoundError,key){return maybeFoundError||savedErrors[key]},null);if(nextError){errorMessage.innerText=nextError}else{error.classList.remove('visible');errorMessage.innerText=""}}})});form.addEventListener('submit',function(e){e.preventDefault();var cardholdername=jQuery("#cardholdername").val();if(cardholdername==''){jQuery(".card_save_form .error").show();jQuery(".card_save_form .error .message").text("Card holder name is required.")}else{jQuery(".card_save_form .error").hide();jQuery(".card_save_form .error .message").text("")}
var plainInputsValid=!0;Array.prototype.forEach.call(form.querySelectorAll('input'),function(input){if(input.checkValidity&&!input.checkValidity()){plainInputsValid=!1;return}});if(!plainInputsValid){triggerBrowserValidation();return}
example.classList.add('submitting');disableInputs();jQuery("#card_save_loading").show();var name=form.querySelector('#'+exampleName+'-name');var address1=form.querySelector('#'+exampleName+'-address');var city=form.querySelector('#'+exampleName+'-city');var state=form.querySelector('#'+exampleName+'-state');var zip=form.querySelector('#'+exampleName+'-zip');var additionalData={name:name?name.value:undefined,address_line1:address1?address1.value:undefined,address_city:city?city.value:undefined,address_state:state?state.value:undefined,address_zip:zip?zip.value:undefined,};stripe.createToken(elements[0],additionalData).then(function(result){example.classList.remove('submitting');if(result.token){example.querySelector('.token').innerText=result.token.id;example.classList.add('submitted');stripeTokenHandler(result.token)}else{enableInputs();jQuery("#card_save_loading").hide()}})});resetButton.addEventListener('click',function(e){e.preventDefault();form.reset();elements.forEach(function(element){element.clear()});error.classList.remove('visible');enableInputs();example.classList.remove('submitted')})}
function stripeTokenHandler(token){var cardholdername=jQuery("#cardholdername").val();if(cardholdername==''){jQuery(".card_save_form .error").show();jQuery(".card_save_form .error .message").text("Card holder name is required.");return!1}else{jQuery(".card_save_form .error").hide();jQuery(".card_save_form .error .message").text("")}
var formClass='.example3';var example=document.querySelector(formClass);var form=example.querySelector('form');var hiddenInput=document.createElement('input');hiddenInput.setAttribute('type','hidden');hiddenInput.setAttribute('id','token-id');hiddenInput.setAttribute('name','stripeToken');hiddenInput.setAttribute('value',token.id);form.appendChild(hiddenInput);var params={action:'AddCard',stripeToken:token.id,cardholdername:cardholdername,};if(!confirm("Are you sure you want to save this card?")){jQuery("#card_save_loading").hide();return!1}
jQuery.ajax({url:college_bound_ajax_object.ajax_url,type:"POST",data:params,success:function(data){console.log(data);jQuery("#card_save_loading").hide();Swal.fire({title:"",html:"Card save successfully."+"<br/>"+" Page automatically redirect to Dashboard...",icon:"success",confirmButtonText:"Okay",});setTimeout(function(){location.reload()},2000)}})}(function(){var elements=stripe.elements({fonts:[{cssSrc:'https://fonts.googleapis.com/css?family=Quicksand',},],locale:window.__exampleLocale,});var elementStyles={base:{color:'#fff',fontWeight:600,fontFamily:'Quicksand, Open Sans, Segoe UI, sans-serif',fontSize:'16px',fontSmoothing:'antialiased',':focus':{color:'#fff',},'::placeholder':{color:'#fff',},':focus::placeholder':{color:'#fff',},},invalid:{color:'#fff',':focus':{color:'#FA755A',},'::placeholder':{color:'#FFCCA5',},},};var elementClasses={focus:'focus',empty:'empty',invalid:'invalid',};var cardNumber=elements.create('cardNumber',{style:elementStyles,classes:elementClasses,});if(jQuery('#example3-card-number').length>0){cardNumber.mount('#example3-card-number')}
var cardExpiry=elements.create('cardExpiry',{style:elementStyles,classes:elementClasses,});if(jQuery('#example3-card-expiry').length>0){cardExpiry.mount('#example3-card-expiry')}
var cardCvc=elements.create('cardCvc',{style:elementStyles,classes:elementClasses,});if(jQuery('#example3-card-cvc').length>0){cardCvc.mount('#example3-card-cvc')}
if(jQuery('#example3-card-cvc').length>0){registerElements([cardNumber,cardExpiry,cardCvc],'example3')}})();
jQuery('.coach_card_detail_save').validate({rules:{card_name:{required:!0,},card_number:{required:!0,},card_exp_month:{required:!0,},card_exp_year:{required:!0,}}});jQuery(".coach_card_detail_save").on("submit",function(event){event.preventDefault();var valid=jQuery(this).valid();if(!valid){return!1}
showLoader();var form_this=jQuery(this);var form_data=new FormData(this);var form_submit=form_this.find(':submit');form_submit.attr("disabled","disabled");form_submit.parent().css('opacity',0.2);jQuery.ajax({url:college_bound_ajax_object.ajax_url,method:"POST",data:form_data,cache:!1,contentType:!1,processData:!1,success:function(response){jQuery('html,body').scrollTop(0);jQuery(".message-content").html("");form_submit.removeAttr("disabled");form_submit.parent().css('opacity',1);var res_data=JSON.parse(response);if(res_data.success){if(res_data.message){var message_content="";message_content='<div class="alert alert-success">'+'<a title="close" aria-label="close" data-dismiss="alert" class="close" href="#">×</a>'+''+res_data.message+'</div>';jQuery(".message-content").append(message_content)}
if(res_data.redirect_url){window.location.replace(res_data.redirect_url)}else{setTimeout(function(){location.reload(!0)},4000)}
if(res_data.confirm){var re_confirm=confirm(res_data.confirm.message);if(re_confirm==!0){window.location.replace(res_data.confirm.redirect_url)}}}else{stopLoader();if(res_data.message){var message_content="";message_content='<div class="alert alert-danger">'+'<a title="close" aria-label="close" data-dismiss="alert" class="close" href="#">×</a>'+''+res_data.message+'</div>';jQuery(".message-content").append(message_content)}
if(res_data.redirect_url){window.location.replace(res_data.redirect_url)}else{if(jQuery('body').hasClass('login-page')){form_this.trigger("reset")}else{setTimeout(function(){location.reload(!0)},4000)}}}}})});jQuery.validator.addMethod('CCExp',function(value,element,params){var minMonth=new Date().getMonth()+1;var minYear=new Date().getFullYear();var month=parseInt(jQuery(params.month).val(),10);var year=parseInt(jQuery(params.year).val(),10);return(!month||!year||year>minYear||(year===minYear&&month>=minMonth))},'Your Credit Card Expiration date is invalid.');jQuery(document).ready(function(){jQuery("#save_keys").click(function(e){e.preventDefault();var userId=jQuery("#userId").val();var publishable_key=jQuery("#publishable_key").val();var secret_key=jQuery("#secret_key").val();var client_id=jQuery("#stripe_client_id").val();var tournament_commission=jQuery("#tournament_commission").val();jQuery.ajax({type:"post",dataType:"json",url:college_bound_ajax_object.ajax_url,data:{action:"save_stripe_keys",userId:userId,publishable_key:publishable_key,secret_key:secret_key,client_id:client_id,tournament_commission:tournament_commission},success:function(msg){if(msg==1){window.location.reload()}}})});jQuery("#disconnect_stripe").click(function(e){e.preventDefault();var userId=jQuery("#userId").val();var cnf=confirm("Are you sure you want to disconnect the stripe account?");if(cnf==!0){jQuery.ajax({type:"post",url:college_bound_ajax_object.ajax_url,data:{action:"delete_stripe_user_id",},success:function(msg){if(msg==1){window.location.reload()}}})}})});function deleteSaveCard(card_id,customer_id){if(!confirm("Are you sure you want to delete it?")){return!1}
jQuery.ajax({type:"post",dataType:"json",url:college_bound_ajax_object.ajax_url,data:{action:"delete_save_card",card_id:card_id,customer_id:customer_id},success:function(msg){if(msg==1){Swal.fire({title:"",html:"Card deleted successfully."+"<br/>"+" Page automatically redirect to Dashboard...",icon:"success",confirmButtonText:"Okay",});setTimeout(function(){location.reload()},2000)}}})}
jQuery('.coach_tournament_price').click(function(){var total=0;var priceArray=[];jQuery(".coach_tournament_price").each(function(){if(jQuery(this).is(":checked")){total+=Number(jQuery(this).val());priceArray.push(jQuery(this).val())}});jQuery('#total_price_amount').html(total)});jQuery('.saved_card_buy_tournaments').click(function(){var card_id=jQuery(this).attr('card_id');var price=jQuery('#total_price_amount').text();var event_id=jQuery('#trnid').val();if(price>0){var priceArray=[];var keyArray=[];jQuery(".coach_tournament_price").each(function(){if(jQuery(this).is(":checked")){keyArray.push(jQuery(this).attr("id"));priceArray.push(jQuery(this).val())}else{priceArray.push(0)}});showLoader();jQuery.ajax({type:"post",dataType:"json",url:college_bound_ajax_object.ajax_url,data:{action:"paymentby_card",card_id:card_id,price:price,event_id:event_id,keyArray:keyArray,price_array:priceArray},success:function(data){stopLoader();if(data.success){Swal.fire({title:"Success",html:data.message+"<br/>"+" Page automatically reload in 5 second...",icon:"success",confirmButtonText:"Okay",});setTimeout(function(){location.reload()},1000)}else{Swal.fire({title:"Error",html:data.message+"<br/>"+" Page automatically reload in 5 second...",icon:"error",confirmButtonText:"Okay",})}}})}else{Swal.fire({title:"Warning",html:"Please select price.",icon:"error",confirmButtonText:"Okay",})}});
/*! This file is auto-generated */
!function(c,d){"use strict";var e=!1,n=!1;if(d.querySelector)if(c.addEventListener)e=!0;if(c.wp=c.wp||{},!c.wp.receiveEmbedMessage)if(c.wp.receiveEmbedMessage=function(e){var t=e.data;if(t)if(t.secret||t.message||t.value)if(!/[^a-zA-Z0-9]/.test(t.secret)){for(var r,a,i,s=d.querySelectorAll('iframe[data-secret="'+t.secret+'"]'),n=d.querySelectorAll('blockquote[data-secret="'+t.secret+'"]'),o=0;o<n.length;o++)n[o].style.display="none";for(o=0;o<s.length;o++)if(r=s[o],e.source===r.contentWindow){if(r.removeAttribute("style"),"height"===t.message){if(1e3<(i=parseInt(t.value,10)))i=1e3;else if(~~i<200)i=200;r.height=i}if("link"===t.message)if(a=d.createElement("a"),i=d.createElement("a"),a.href=r.getAttribute("src"),i.href=t.value,i.host===a.host)if(d.activeElement===r)c.top.location.href=t.value}}},e)c.addEventListener("message",c.wp.receiveEmbedMessage,!1),d.addEventListener("DOMContentLoaded",t,!1),c.addEventListener("load",t,!1);function t(){if(!n){n=!0;for(var e,t,r=-1!==navigator.appVersion.indexOf("MSIE 10"),a=!!navigator.userAgent.match(/Trident.*rv:11\./),i=d.querySelectorAll("iframe.wp-embedded-content"),s=0;s<i.length;s++){if(!(e=i[s]).getAttribute("data-secret"))t=Math.random().toString(36).substr(2,10),e.src+="#?secret="+t,e.setAttribute("data-secret",t);if(r||a)(t=e.cloneNode(!0)).removeAttribute("security"),e.parentNode.replaceChild(t,e)}}}}(window,document);
